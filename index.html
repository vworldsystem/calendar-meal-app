<!-- 날짜/요일 표시 영역 -->
<div id="date-container" style="font-size: 1.5em; margin-bottom: 20px; color: #333;">
  <span id="today" style="font-weight: bold;"></span>
  <span id="weekday" style="margin-left: 8px; color: #777;"></span>
</div>

<!-- 버튼 스타일 식권 날짜 선택 -->
<div id="date-buttons" style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px;">
  <button class="date-btn" data-date="2025-04-26">4/26 (토)</button>
  <button class="date-btn" data-date="2025-04-27">4/27 (일)</button>
  <button class="date-btn" data-date="2025-04-28">4/28 (월)</button>
</div>

<!-- 캘린더 입력창 (추가 선택용) -->
<input type="date" id="date-picker" style="padding: 8px 12px; font-size: 1em; border: 1px solid #ccc; border-radius: 8px;">

<script>
  // 날짜 문자열 안전하게 변환
  function parseDateString(dateString) {
    const [year, month, day] = dateString.split('-').map(Number);
    return new Date(year, month - 1, day);
  }

  // 날짜 + 요일 업데이트
  function updateDateDisplay(dateString) {
    const date = parseDateString(dateString);
    const dayList = ['일', '월', '화', '수', '목', '금', '토'];

    const formattedDate = `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;
    const weekday = `(${dayList[date.getDay()]})`;

    document.getElementById('today').innerText = formattedDate;
    document.getElementById('weekday').innerText = weekday;

    // 버튼 선택 상태 갱신
    document.querySelectorAll('.date-btn').forEach(btn => {
      if (btn.dataset.date === dateString) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }
    });
  }

  // 오늘 날짜 기본 표시
  function setToday() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const todayStr = `${year}-${month}-${day}`;

    updateDateDisplay(todayStr);

    // 캘린더 기본값 세팅
    document.getElementById('date-picker').value = todayStr;
  }

  // 자정 지나면 자동으로 날짜 갱신
  function setupMidnightUpdater() {
    const now = new Date();
    const msUntilMidnight = 
      new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 1) - now; 

    setTimeout(() => {
      setToday();
      setupMidnightUpdater();
    }, msUntilMidnight);
  }

  // 이벤트 연결
  document.querySelectorAll('.date-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const selectedDate = this.dataset.date;
      updateDateDisplay(selectedDate);
      document.getElementById('date-picker').value = selectedDate;
    });
  });

  document.getElementById('date-picker').addEventListener('change', function() {
    const selectedDate = this.value;
    if (selectedDate) {
      updateDateDisplay(selectedDate);
    }
  });

  // 페이지 로드 시 실행
  setToday();
  setupMidnightUpdater();
</script>

<style>
  .date-btn {
    padding: 10px 16px;
    font-size: 1em;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: white;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
  }
  .date-btn:hover {
    background-color: #f0f0f0;
  }
  .date-btn.active {
    background-color: #4CAF50;
    color: white;
    border-color: #4CAF50;
  }
</style>
